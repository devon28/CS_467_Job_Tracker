<!-- contacts.html -->
{% extends "base.html" %}

{% block content %}
    <div class="table-container">
    <h2 class="page-header">Contacts</h2>
   
    <form class="data-form" style="display: none;">
        <input type="text" id="job-input" placeholder="Enter a job">
        <button type="submit">Save</button>
    </form>
    
    <table class="data-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Company</th>
                <th>Title</th>
                <th>Phone</th>
                <th>Email</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            {% for i, contact in enumerate(contacts) %}
            <tr>
            <td>{{ contact.name }}</td>
            <td>{{ contact.company }}</td>
            <td>{{ contact.title }}</td>
            <td>{{ contact.phone }}</td>
            <td>{{ contact.email }}</td>
            <td><button class="edit-button" onclick="navigateToEditContactsPage(i)">Edit</button></td>
            <td><button class="delete-button" onclick="confirmDelete(i)">Delete</button></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="add-container">
        <h3>Add Contact</h3>
        <button class="add-data-button" onclick="addNewContact()">+</button>
    </div>
    </div>

    <script>
        function navigateToEditContactsPage(contactId) {
            // JavaScript code to navigate to the edit_contacts page
            window.location.href = "{{ url_for('edit_contacts', id=id) }}";
        }


        function confirmDelete(contactId) {
            // Show a confirmation dialog
            const result = confirm("Are you sure you want to delete this contact entry?");

            // Check the user's choice
            if (result) {
                // The user clicked "OK" (Yes), you can perform the delete action here
                // For example: call a delete function or perform an AJAX request to the server
                // ... Add your delete logic here ...
                
                console.log("Delete confirmed.");
                window.location.href = "/contacts";
            } else {
                // The user clicked "Cancel" (No), do nothing or handle as needed
                console.log("Delete canceled.");
            }
        }

        function addNewContact() {
            // JavaScript code to add a new row with text boxes to the table
            const newRow = document.createElement("tr");
            newRow.innerHTML = `
                <td><input type="text" class="input-box" placeholder="Name"></td>
                <td><input type="text" class="input-box" placeholder="Company"></td>
                <td><input type="text" class="input-box" placeholder="Job Title"></td>
                <td><input type="text" class="input-box" placeholder="Phone"></td>
                <td><input type="text" class="input-box" placeholder="Email"></td>
                <td><button class="save-button" onclick="refreshPage()">Save</button></td>
                <td><button class="cancel-button" onclick="refreshPage()">Cancel</button></td>
            `;
            document.querySelector("tbody").appendChild(newRow);
        }

        function refreshPage() {
            window.location.href = "{{ url_for('contacts') }}";
        }
    </script>
    
{% endblock %}
